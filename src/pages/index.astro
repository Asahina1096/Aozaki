---
import Footer from "@/components/Footer.astro";
import Header from "@/components/Header.astro";
import { ServerListWithSuspense } from "@/components/ServerListWithSuspense";
import BaseLayout from "@/layouts/BaseLayout.astro";
---

<BaseLayout>
  <div class="flex min-h-screen flex-col">
    <!-- Header 改为静态 Astro 组件，主题切换使用原生 JS -->
    <Header />

    <main class="flex-1">
      <div class="container py-8">
        <div class="mb-8 flex items-center">
          <h2 class="text-2xl md:text-3xl font-bold text-primary">节点状态</h2>
        </div>

        <!-- ServerListWithSuspense 使用 React 19 的 use hook 读取 Promise -->
        <!-- 内部包含 Suspense 和 ErrorBoundary -->
        <ServerListWithSuspense
          client:load
          refreshInterval={2000}
        />
      </div>
    </main>

    <!-- Footer 改为静态 Astro 组件 -->
    <Footer />
  </div>
</BaseLayout>
